<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Fs | Node Note</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/Node/assets/favicon.ico">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta name="keywords" content="Node Note">
    
    <link rel="preload" href="/Node/assets/css/0.styles.271287b7.css" as="style"><link rel="preload" href="/Node/assets/js/app.7610ec33.js" as="script"><link rel="preload" href="/Node/assets/js/2.b6a62b60.js" as="script"><link rel="preload" href="/Node/assets/js/27.8f3d6d79.js" as="script"><link rel="prefetch" href="/Node/assets/js/10.d6d5e694.js"><link rel="prefetch" href="/Node/assets/js/11.62c9ee39.js"><link rel="prefetch" href="/Node/assets/js/12.913a2399.js"><link rel="prefetch" href="/Node/assets/js/13.e14a2a24.js"><link rel="prefetch" href="/Node/assets/js/14.8d03f2f6.js"><link rel="prefetch" href="/Node/assets/js/15.09afaa40.js"><link rel="prefetch" href="/Node/assets/js/16.144329bc.js"><link rel="prefetch" href="/Node/assets/js/17.451bf273.js"><link rel="prefetch" href="/Node/assets/js/18.50d174db.js"><link rel="prefetch" href="/Node/assets/js/19.86462bea.js"><link rel="prefetch" href="/Node/assets/js/20.749d3a5f.js"><link rel="prefetch" href="/Node/assets/js/21.666325de.js"><link rel="prefetch" href="/Node/assets/js/22.3fc3dc2e.js"><link rel="prefetch" href="/Node/assets/js/23.48f01235.js"><link rel="prefetch" href="/Node/assets/js/24.03e127ea.js"><link rel="prefetch" href="/Node/assets/js/25.5780fa83.js"><link rel="prefetch" href="/Node/assets/js/26.80824d42.js"><link rel="prefetch" href="/Node/assets/js/28.ae79e648.js"><link rel="prefetch" href="/Node/assets/js/29.bd46e497.js"><link rel="prefetch" href="/Node/assets/js/3.13c439d3.js"><link rel="prefetch" href="/Node/assets/js/30.2c681567.js"><link rel="prefetch" href="/Node/assets/js/31.ebd9806d.js"><link rel="prefetch" href="/Node/assets/js/32.c42210d5.js"><link rel="prefetch" href="/Node/assets/js/33.88580e82.js"><link rel="prefetch" href="/Node/assets/js/4.068c0638.js"><link rel="prefetch" href="/Node/assets/js/5.2183ad7c.js"><link rel="prefetch" href="/Node/assets/js/6.c9e328b2.js"><link rel="prefetch" href="/Node/assets/js/7.5c8491f1.js"><link rel="prefetch" href="/Node/assets/js/8.2032dafa.js"><link rel="prefetch" href="/Node/assets/js/9.d976b2b9.js">
    <link rel="stylesheet" href="/Node/assets/css/0.styles.271287b7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Node/" class="home-link router-link-active"><!----> <span class="site-name">Node Note</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Node/base/" class="nav-link">
  ğŸƒ åŸºç¡€
</a></div><div class="nav-item"><a href="/Node/modules/" class="nav-link router-link-active">
  ğŸš— å†…ç½®æ¨¡å—
</a></div><div class="nav-item"><a href="/Node/advance/" class="nav-link">
  ğŸš„ è¿›é˜¶
</a></div><div class="nav-item"><a href="/Node/koa2/" class="nav-link">
  ğŸš€ Koa2è§£å¯†
</a></div><div class="nav-item"><a href="/Node/express/" class="nav-link">
  ğŸ›« Express
</a></div><div class="nav-item"><a href="/Node/nest/" class="nav-link">
  Nest
</a></div><div class="nav-item"><a href="/Node/egg/" class="nav-link">
  Egg
</a></div><div class="nav-item"><a href="/Node/other/" class="nav-link">
  ğŸš¢ å…¶å®ƒ
</a></div><div class="nav-item"><a href="https://github.com/MonsterXiong/Node" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ˜˜ GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Node/base/" class="nav-link">
  ğŸƒ åŸºç¡€
</a></div><div class="nav-item"><a href="/Node/modules/" class="nav-link router-link-active">
  ğŸš— å†…ç½®æ¨¡å—
</a></div><div class="nav-item"><a href="/Node/advance/" class="nav-link">
  ğŸš„ è¿›é˜¶
</a></div><div class="nav-item"><a href="/Node/koa2/" class="nav-link">
  ğŸš€ Koa2è§£å¯†
</a></div><div class="nav-item"><a href="/Node/express/" class="nav-link">
  ğŸ›« Express
</a></div><div class="nav-item"><a href="/Node/nest/" class="nav-link">
  Nest
</a></div><div class="nav-item"><a href="/Node/egg/" class="nav-link">
  Egg
</a></div><div class="nav-item"><a href="/Node/other/" class="nav-link">
  ğŸš¢ å…¶å®ƒ
</a></div><div class="nav-item"><a href="https://github.com/MonsterXiong/Node" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ˜˜ GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/Node/modules/" aria-current="page" class="sidebar-link">ç®€ä»‹</a></li><li><a href="/Node/modules/path.html" class="sidebar-link">è·¯å¾„</a></li><li><a href="/Node/modules/process.html" class="sidebar-link">è¿›ç¨‹</a></li><li><a href="/Node/modules/fs.html" aria-current="page" class="active sidebar-link">æ–‡ä»¶ç³»ç»Ÿ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Node/modules/fs.html#è·å–ä¸€ä¸ªæ–‡ä»¶çš„çŠ¶æ€" class="sidebar-link">è·å–ä¸€ä¸ªæ–‡ä»¶çš„çŠ¶æ€</a></li><li class="sidebar-sub-header"><a href="/Node/modules/fs.html#æ–‡ä»¶æè¿°ç¬¦" class="sidebar-link">æ–‡ä»¶æè¿°ç¬¦</a></li><li class="sidebar-sub-header"><a href="/Node/modules/fs.html#æ–‡ä»¶çš„è¯»å†™" class="sidebar-link">æ–‡ä»¶çš„è¯»å†™</a></li><li class="sidebar-sub-header"><a href="/Node/modules/fs.html#æ–‡ä»¶å¤¹æ“ä½œ" class="sidebar-link">æ–‡ä»¶å¤¹æ“ä½œ</a></li><li class="sidebar-sub-header"><a href="/Node/modules/fs.html#æ–‡ä»¶å¤¹çš„å¤åˆ¶" class="sidebar-link">æ–‡ä»¶å¤¹çš„å¤åˆ¶</a></li></ul></li><li><a href="/Node/modules/http.html" class="sidebar-link">ç½‘ç»œhttp</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="fs"><a href="#fs" class="header-anchor">#</a> Fs</h1> <p>fs æ˜¯ File System çš„ç¼©å†™ï¼Œè¡¨ç¤ºæ–‡ä»¶ç³»ç»Ÿ</p> <p>å¯¹äºä»»ä½•ä¸€ä¸ªä¸ºæœåŠ¡å™¨ç«¯æœåŠ¡çš„è¯­è¨€æˆ–è€…æ¡†æ¶é€šå¸¸éƒ½ä¼šæœ‰è‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿï¼š</p> <ul><li>å› ä¸ºæœåŠ¡å™¨éœ€è¦å°†å„ç§æ•°æ®ã€æ–‡ä»¶ç­‰æ”¾ç½®åˆ°ä¸åŒçš„åœ°æ–¹ï¼›</li> <li>æ¯”å¦‚ç”¨æˆ·æ•°æ®å¯èƒ½å¤§å¤šæ•°éƒ½æ˜¯æ”¾åˆ°æ•°æ®åº“ä¸­çš„</li> <li>æ¯”å¦‚æŸäº›é…ç½®æ–‡ä»¶æˆ–è€…ç”¨æˆ·èµ„æºï¼ˆå›¾ç‰‡ã€éŸ³è§†é¢‘ï¼‰éƒ½æ˜¯ä»¥æ–‡ä»¶çš„å½¢å¼å­˜åœ¨äºæ“ä½œç³»ç»Ÿä¹‹ä¸Šçš„ï¼›</li></ul> <p>Node ä¹Ÿæœ‰è‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿæ“ä½œæ¨¡å—ï¼Œå°±æ˜¯ fs:</p> <ul><li>å€ŸåŠ©äº Node å¸®æˆ‘ä»¬å°è£…çš„æ–‡ä»¶ç³»ç»Ÿï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»»ä½•çš„æ“ä½œç³»ç»Ÿä¸Šé¢ç›´æ¥å»æ“ä½œæ–‡ä»¶ï¼›</li> <li>è¿™ä¹Ÿæ˜¯ Node å¯ä»¥å¼€å‘æœåŠ¡å™¨çš„ä¸€å¤§åŸå› ï¼Œä¹Ÿæ˜¯å®ƒå¯ä»¥æˆä¸ºå‰ç«¯è‡ªåŠ¨åŒ–è„šæœ¬ç­‰çƒ­é—¨å·¥å…·çš„åŸå› ï¼›</li></ul> <h2 id="è·å–ä¸€ä¸ªæ–‡ä»¶çš„çŠ¶æ€"><a href="#è·å–ä¸€ä¸ªæ–‡ä»¶çš„çŠ¶æ€" class="header-anchor">#</a> è·å–ä¸€ä¸ªæ–‡ä»¶çš„çŠ¶æ€</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ¡ˆä¾‹ï¼šè¯»å–æ–‡ä»¶çš„ä¿¡æ¯</span>
<span class="token keyword">const</span> filepath <span class="token operator">=</span> <span class="token string">&quot;./1.txt&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// æ–¹å¼ä¸€ï¼šåŒæ­¥æ“ä½œ</span>
<span class="token comment">// const info = fs.statSync(filepath);</span>
<span class="token comment">// console.log(&quot;åç»­éœ€è¦æ‰§è¡Œçš„ä»£ç &quot;);</span>
<span class="token comment">// console.log(info);</span>

<span class="token comment">// æ–¹å¼äºŒï¼šå¼‚æ­¥æ“ä½œ</span>
<span class="token comment">// fs.stat(filepath, (err, info) =&gt; {</span>
<span class="token comment">//   if (err) {</span>
<span class="token comment">//     console.log(err);</span>
<span class="token comment">//     return;</span>
<span class="token comment">//   }</span>
<span class="token comment">//   console.log(info);</span>
<span class="token comment">// });</span>

<span class="token comment">// console.log(&quot;åç»­éœ€è¦æ‰§è¡Œçš„ä»£ç &quot;);</span>
<span class="token comment">// å†…éƒ¨åŸç†ï¼Œåº•å±‚çš„å¼‚æ­¥IOï¼Œä¸ä¼šé˜»å¡ï¼Œçº¿ç¨‹æ± </span>
<span class="token comment">// å›è°ƒå®¹æ˜“å‡ºç°å›è°ƒåœ°ç‹±</span>

<span class="token comment">// æ–¹å¼ä¸‰ï¼šPromises</span>
<span class="token comment">// fs.promises</span>
<span class="token comment">//   .stat(filepath)</span>
<span class="token comment">//   .then((res) =&gt; {</span>
<span class="token comment">//     console.log(res);</span>
<span class="token comment">//   })</span>
<span class="token comment">//   .catch((err) =&gt; {</span>
<span class="token comment">//     console.log(err);</span>
<span class="token comment">//   });</span>

<span class="token comment">// console.log(&quot;åç»­éœ€è¦æ‰§è¡Œçš„ä»£ç &quot;);</span>
</code></pre></div><h2 id="æ–‡ä»¶æè¿°ç¬¦"><a href="#æ–‡ä»¶æè¿°ç¬¦" class="header-anchor">#</a> æ–‡ä»¶æè¿°ç¬¦</h2> <p>æ–‡ä»¶æè¿°ç¬¦ï¼ˆfile descriptorsï¼‰æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p> <ul><li>åœ¨ ï¼ˆç±» Unix æ“ä½œç³»ç»Ÿï¼‰POSIX ç³»ç»Ÿä¸Šï¼Œå¯¹äºæ¯ä¸ªè¿›ç¨‹ï¼Œå†…æ ¸éƒ½ç»´æŠ¤ç€ä¸€å¼ å½“å‰æ‰“å¼€ç€çš„æ–‡ä»¶å’Œèµ„æºçš„è¡¨æ ¼ã€‚</li> <li>æ¯ä¸ªæ‰“å¼€çš„æ–‡ä»¶éƒ½åˆ†é…äº†ä¸€ä¸ªç§°ä¸ºæ–‡ä»¶æè¿°ç¬¦çš„ç®€å•çš„æ•°å­—æ ‡è¯†ç¬¦ã€‚</li> <li>åœ¨ç³»ç»Ÿå±‚ï¼Œæ‰€æœ‰æ–‡ä»¶ç³»ç»Ÿæ“ä½œéƒ½ä½¿ç”¨è¿™äº›æ–‡ä»¶æè¿°ç¬¦æ¥æ ‡è¯†å’Œè·Ÿè¸ªæ¯ä¸ªç‰¹å®šçš„æ–‡ä»¶</li> <li>Windows ç³»ç»Ÿä¸­ä½¿ç”¨äº†ä¸€ä¸ªè™½ç„¶ä¸åŒä½†æ¦‚å¿µä¸Šç±»ä¼¼çš„æœºåˆ¶æ¥è·Ÿè¸ªèµ„æº</li></ul> <p>ä¸ºäº†ç®€åŒ–ç”¨æˆ·çš„å·¥ä½œï¼ŒNode.js æŠ½è±¡å‡ºæ“ä½œç³»ç»Ÿä¹‹é—´ç‰¹å®šå·®å¼‚ï¼Œå¹¶æœªæ‰€æœ‰æ‰“å¼€çš„æ–‡ä»¶åˆ†é…ä¸€ä¸ªæ•°å­—å‹çš„æ–‡ä»¶æè¿°ç¬¦ã€‚</p> <p>fs.open()æ–¹æ³•ç”¨äºåˆ†é…æ–°çš„æ–‡ä»¶æè¿°ç¬¦</p> <ul><li>ä¸€æ—¦è¢«åˆ†é…ï¼Œåˆ™æ–‡ä»¶æè¿°ç¬¦å¯ç”¨äºæ–‡ä»¶è¯»å–æ•°æ®ã€åƒæ–‡ä»¶å†™å…¥æ•°æ®ã€æˆ–è¯·æ±‚å…³äºæ–‡ä»¶çš„ä¿¡æ¯ã€‚</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// æ–‡ä»¶æè¿°ç¬¦</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> filepath <span class="token operator">=</span> <span class="token string">&quot;./1.txt&quot;</span><span class="token punctuation">;</span>

fs<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>filepath<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> fd</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

  <span class="token comment">// é€šè¿‡æ–‡ä»¶æè¿°ç¬¦å»è·å–æ–‡ä»¶çš„ä¿¡æ¯</span>
  <span class="token comment">// ä»¥få¼€å¤´çš„åŸºæœ¬å¯ä»¥ä¼ å…¥æ–‡ä»¶æè¿°ç¬¦fdï¼Œstatå’Œfstat</span>
  <span class="token comment">// ä»APIå±‚é¢æ¥è¯´ï¼ŒæŠŠå¾ˆå¤šæ–‡ä»¶æè¿°ç¬¦çš„æ“ä½œéšè—èµ·æ¥äº†</span>
  fs<span class="token punctuation">.</span><span class="token function">fstat</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> info</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="æ–‡ä»¶çš„è¯»å†™"><a href="#æ–‡ä»¶çš„è¯»å†™" class="header-anchor">#</a> æ–‡ä»¶çš„è¯»å†™</h2> <ul><li>fs.readFile(path[,options],callback):è¯»å–æ–‡ä»¶çš„å†…å®¹</li> <li>fs.writeFile(file,data[,options],callback):åœ¨æ–‡ä»¶ä¸­å†™å…¥å†…å®¹ï¼›</li></ul> <p>options å‚æ•°ï¼š</p> <ul><li>flagï¼šå†™å…¥çš„æ–¹å¼
<ul><li>w æ‰“å¼€æ–‡ä»¶å†™å…¥ï¼Œé»˜è®¤å€¼</li> <li>w+æ‰“å¼€æ–‡ä»¶è¿›è¡Œè¯»å†™ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶</li> <li>r+æ‰“å¼€æ–‡ä»¶è¿›è¡Œè¯»å†™ï¼Œå¦‚æœä¸å­˜åœ¨é‚£ä¹ˆæŠ›å‡ºå¼‚å¸¸</li> <li>r æ‰“å¼€æ–‡ä»¶è¯»å–ï¼Œè¯»å–æ—¶çš„é»˜è®¤å€¼ï¼›</li> <li>a æ‰“å¼€è¦å†™å…¥çš„æ–‡ä»¶ï¼Œå°†æµæ”¾åœ¨æ–‡ä»¶æœ«å°¾ã€‚å¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶ï¼›</li> <li>a+æ‰“å¼€æ–‡ä»¶è¿›è¡Œè¯»å†™ï¼Œå°†æµæ”¾åœ¨æ–‡ä»¶æœ«å°¾ã€‚å¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶</li></ul></li> <li>encoding:<a href="https://www.jianshu.com/p/899e749be47c" target="_blank" rel="noopener noreferrer">å­—ç¬¦çš„ç¼–ç <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs'&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ–‡ä»¶å†™å…¥</span>
fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">&quot;./1.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;hello fs&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> flag<span class="token operator">:</span> <span class="token string">&quot;a&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ–‡ä»¶çš„è¯»å–</span>

<span class="token comment">// å¦‚æœä¸å¡«å†™ encoding,è¿”å›çš„ç»“æœéƒ½å± Buffer;</span>
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">&quot;./1.txt/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> encoding<span class="token operator">:</span> <span class="token string">&quot;utf8&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="æ–‡ä»¶å¤¹æ“ä½œ"><a href="#æ–‡ä»¶å¤¹æ“ä½œ" class="header-anchor">#</a> æ–‡ä»¶å¤¹æ“ä½œ</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 1.åˆ›å»ºæ–‡ä»¶å¤¹</span>
<span class="token keyword">const</span> dirname <span class="token operator">=</span> <span class="token string">&quot;./why&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// if (!fs.existsSync(dirname)) {</span>
<span class="token comment">//   fs.mkdir(dirname, (err) =&gt; {</span>
<span class="token comment">//     console.log(err);</span>
<span class="token comment">//   });</span>
<span class="token comment">// } else {</span>
<span class="token comment">// }</span>

<span class="token comment">// 2.è¯»å–æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰æ–‡ä»¶</span>

<span class="token comment">// function getFiles(dirname) {</span>
<span class="token comment">//   fs.readdir(dirname, { withFileTypes: true }, (err, files) =&gt; {</span>
<span class="token comment">//     files.forEach((file) =&gt; {</span>
<span class="token comment">//       if (file.isDirectory()) {</span>
<span class="token comment">//         const filepath = path.resolve(dirname, file.name);</span>
<span class="token comment">//         getFiles(filepath);</span>
<span class="token comment">//       }</span>
<span class="token comment">//       console.log(file.name);</span>
<span class="token comment">//       //   fs.stat(file, (err, info) =&gt; {});</span>
<span class="token comment">//     });</span>
<span class="token comment">//   });</span>
<span class="token comment">// }</span>

<span class="token comment">// getFiles(dirname);</span>

<span class="token comment">// 3.æ–‡ä»¶å¤¹çš„é‡å‘½å</span>
<span class="token comment">// fs.rename(dirname, &quot;./lib&quot;, (err) =&gt; {</span>
<span class="token comment">//   console.log(err);</span>
<span class="token comment">// });</span>
</code></pre></div><h2 id="æ–‡ä»¶å¤¹çš„å¤åˆ¶"><a href="#æ–‡ä»¶å¤¹çš„å¤åˆ¶" class="header-anchor">#</a> æ–‡ä»¶å¤¹çš„å¤åˆ¶</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> srcDir <span class="token operator">=</span> process<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> destDir <span class="token operator">=</span> process<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">30</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  i<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token string">&quot;day&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> srcPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>srcDir<span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> destPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>destDir<span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>fs<span class="token punctuation">.</span><span class="token function">existsSync</span><span class="token punctuation">(</span>destPath<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>
  fs<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span>destPath<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;æ–‡ä»¶åˆ›å»ºæˆåŠŸå¼€å§‹æ‹·è´:&quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// éå†ç›®å½•ä¸‹æ‰€æœ‰çš„æ–‡ä»¶</span>
  <span class="token keyword">const</span> srcFiles <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span>srcPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> file <span class="token keyword">of</span> srcFiles<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">&quot;.mp4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> srcFile <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>srcPath<span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> destFile <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">(</span>destPath<span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      fs<span class="token punctuation">.</span><span class="token function">copyFileSync</span><span class="token punctuation">(</span>srcFile<span class="token punctuation">,</span> destFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token string">&quot;æ‹·è´æˆåŠŸ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/Node/modules/process.html" class="prev">
        è¿›ç¨‹
      </a></span> <span class="next"><a href="/Node/modules/http.html">
        ç½‘ç»œhttp
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/Node/assets/js/app.7610ec33.js" defer></script><script src="/Node/assets/js/2.b6a62b60.js" defer></script><script src="/Node/assets/js/27.8f3d6d79.js" defer></script>
  </body>
</html>
