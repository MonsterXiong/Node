<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Node.js | Node Note</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/Node/assets/favicon.ico">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta name="keywords" content="Node Note">
    
    <link rel="preload" href="/Node/assets/css/0.styles.271287b7.css" as="style"><link rel="preload" href="/Node/assets/js/app.7610ec33.js" as="script"><link rel="preload" href="/Node/assets/js/2.b6a62b60.js" as="script"><link rel="preload" href="/Node/assets/js/12.913a2399.js" as="script"><link rel="prefetch" href="/Node/assets/js/10.d6d5e694.js"><link rel="prefetch" href="/Node/assets/js/11.62c9ee39.js"><link rel="prefetch" href="/Node/assets/js/13.e14a2a24.js"><link rel="prefetch" href="/Node/assets/js/14.8d03f2f6.js"><link rel="prefetch" href="/Node/assets/js/15.09afaa40.js"><link rel="prefetch" href="/Node/assets/js/16.144329bc.js"><link rel="prefetch" href="/Node/assets/js/17.451bf273.js"><link rel="prefetch" href="/Node/assets/js/18.50d174db.js"><link rel="prefetch" href="/Node/assets/js/19.86462bea.js"><link rel="prefetch" href="/Node/assets/js/20.749d3a5f.js"><link rel="prefetch" href="/Node/assets/js/21.666325de.js"><link rel="prefetch" href="/Node/assets/js/22.3fc3dc2e.js"><link rel="prefetch" href="/Node/assets/js/23.48f01235.js"><link rel="prefetch" href="/Node/assets/js/24.03e127ea.js"><link rel="prefetch" href="/Node/assets/js/25.5780fa83.js"><link rel="prefetch" href="/Node/assets/js/26.80824d42.js"><link rel="prefetch" href="/Node/assets/js/27.8f3d6d79.js"><link rel="prefetch" href="/Node/assets/js/28.ae79e648.js"><link rel="prefetch" href="/Node/assets/js/29.bd46e497.js"><link rel="prefetch" href="/Node/assets/js/3.13c439d3.js"><link rel="prefetch" href="/Node/assets/js/30.2c681567.js"><link rel="prefetch" href="/Node/assets/js/31.ebd9806d.js"><link rel="prefetch" href="/Node/assets/js/32.c42210d5.js"><link rel="prefetch" href="/Node/assets/js/33.88580e82.js"><link rel="prefetch" href="/Node/assets/js/4.068c0638.js"><link rel="prefetch" href="/Node/assets/js/5.2183ad7c.js"><link rel="prefetch" href="/Node/assets/js/6.c9e328b2.js"><link rel="prefetch" href="/Node/assets/js/7.5c8491f1.js"><link rel="prefetch" href="/Node/assets/js/8.2032dafa.js"><link rel="prefetch" href="/Node/assets/js/9.d976b2b9.js">
    <link rel="stylesheet" href="/Node/assets/css/0.styles.271287b7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Node/" class="home-link router-link-active"><!----> <span class="site-name">Node Note</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Node/base/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  🏃 基础
</a></div><div class="nav-item"><a href="/Node/modules/" class="nav-link">
  🚗 内置模块
</a></div><div class="nav-item"><a href="/Node/advance/" class="nav-link">
  🚄 进阶
</a></div><div class="nav-item"><a href="/Node/koa2/" class="nav-link">
  🚀 Koa2解密
</a></div><div class="nav-item"><a href="/Node/express/" class="nav-link">
  🛫 Express
</a></div><div class="nav-item"><a href="/Node/nest/" class="nav-link">
  Nest
</a></div><div class="nav-item"><a href="/Node/egg/" class="nav-link">
  Egg
</a></div><div class="nav-item"><a href="/Node/other/" class="nav-link">
  🚢 其它
</a></div><div class="nav-item"><a href="https://github.com/MonsterXiong/Node" target="_blank" rel="noopener noreferrer" class="nav-link external">
  😘 GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Node/base/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  🏃 基础
</a></div><div class="nav-item"><a href="/Node/modules/" class="nav-link">
  🚗 内置模块
</a></div><div class="nav-item"><a href="/Node/advance/" class="nav-link">
  🚄 进阶
</a></div><div class="nav-item"><a href="/Node/koa2/" class="nav-link">
  🚀 Koa2解密
</a></div><div class="nav-item"><a href="/Node/express/" class="nav-link">
  🛫 Express
</a></div><div class="nav-item"><a href="/Node/nest/" class="nav-link">
  Nest
</a></div><div class="nav-item"><a href="/Node/egg/" class="nav-link">
  Egg
</a></div><div class="nav-item"><a href="/Node/other/" class="nav-link">
  🚢 其它
</a></div><div class="nav-item"><a href="https://github.com/MonsterXiong/Node" target="_blank" rel="noopener noreferrer" class="nav-link external">
  😘 GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/Node/base/" aria-current="page" class="active sidebar-link">Node.js</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Node/base/#js-引擎的作用" class="sidebar-link">JS 引擎的作用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Node/base/#比较常见的-js-引擎" class="sidebar-link">比较常见的 JS 引擎</a></li></ul></li><li class="sidebar-sub-header"><a href="/Node/base/#浏览器内核是什么" class="sidebar-link">浏览器内核是什么？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Node/base/#渲染引擎工作的过程" class="sidebar-link">渲染引擎工作的过程</a></li></ul></li><li class="sidebar-sub-header"><a href="/Node/base/#内核和引擎的关系" class="sidebar-link">内核和引擎的关系</a></li><li class="sidebar-sub-header"><a href="/Node/base/#node-js-的应用场景" class="sidebar-link">Node.js 的应用场景</a></li><li class="sidebar-sub-header"><a href="/Node/base/#node-的安装" class="sidebar-link">Node 的安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Node/base/#安装方式" class="sidebar-link">安装方式</a></li><li class="sidebar-sub-header"><a href="/Node/base/#node-的版本工具" class="sidebar-link">Node 的版本工具</a></li></ul></li><li class="sidebar-sub-header"><a href="/Node/base/#node-的-repl" class="sidebar-link">Node 的 REPL</a></li><li class="sidebar-sub-header"><a href="/Node/base/#浏览器和-node-js-架构区别" class="sidebar-link">浏览器和 Node.js 架构区别</a></li></ul></li><li><a href="/Node/base/module.html" class="sidebar-link">模块化</a></li><li><a href="/Node/base/V8.html" class="sidebar-link">V8</a></li><li><a href="/Node/base/application.html" class="sidebar-link">应用</a></li><li><a href="/Node/base/lib.html" class="sidebar-link">库</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="node-js"><a href="#node-js" class="header-anchor">#</a> Node.js</h1> <p><a href="https://github.com/nodejs/node" target="_blank" rel="noopener noreferrer">Node.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 是一个基于 Chrome 的 V8 JavaScript 引擎的 JavaScript 运行时环境。</p> <blockquote><p>Node.js is a JavaScript runtime built on Chrome's V8 JavaScript engine</p></blockquote> <p>Node.js 基于 V8 引擎来执行 JS 代码，但是不仅仅只有 V8 引擎：</p> <ul><li>V8 可以嵌入到任何 C++应用程序中，无论是 Chrome 还是 Node.js，都是嵌入了 V8 引擎来执行 JS 代码。</li> <li>但是在 Chrome 浏览器中，还需要解析、渲染 HTML、CSS 等相关渲染引擎，另外还需要提供支持浏览器操作的 API、浏览器自己的事件循环等；</li> <li>Node.js 中也需要一些额外的操作，比如文件系统读/写、网络 IO、加密、压缩解压文件等操作</li></ul> <h2 id="js-引擎的作用"><a href="#js-引擎的作用" class="header-anchor">#</a> JS 引擎的作用</h2> <p>首先 JS 代码最终是需要被 CPU 执行的，然而 CPU 只认识自己的指令集（实际上就是机器语言），才能被 CPU 所执行，因为 JS 属于一门高级语言，高级语言要想执行，要先变成汇编语言然后再转成机器语言，然后 CPU 再执行，因此我们需要 JS 引擎来帮助我们将 JS 代码编译成 CPU 指令来执行。</p> <h3 id="比较常见的-js-引擎"><a href="#比较常见的-js-引擎" class="header-anchor">#</a> 比较常见的 JS 引擎</h3> <ul><li>SpiderMonkey：第一款 JS 引擎，由 JS 作者开发</li> <li>Chakra：微软开发，用于 IT 浏览器</li> <li>JavaScriptCore：WebKit 中的 JS 引擎，Apple 公司开发</li> <li>V8：Google 开发的强大 JS 引擎</li></ul> <h2 id="浏览器内核是什么"><a href="#浏览器内核是什么" class="header-anchor">#</a> 浏览器内核是什么？</h2> <p>不同的浏览器有不同的内核组成。</p> <ul><li>Gecko</li> <li>Trident IE4-11</li> <li>Webkit Safari</li> <li>Blink 是 Webkit 的分支，现在用于 Chrome、Edge、Opera</li></ul> <p>通常我们说的浏览器内核指的是浏览器的排版引擎，也称为浏览器引擎、页面渲染引擎或样板引擎</p> <h3 id="渲染引擎工作的过程"><a href="#渲染引擎工作的过程" class="header-anchor">#</a> 渲染引擎工作的过程</h3> <p>在这个执行过程中，如果 html 解析遇到了 script 标签的话，会停止解析，而去加载和执行 js 代码。</p> <p><strong>为什么不直接异步去加载执行 js 代码呢？</strong></p> <ul><li>因为 JS 代码可以操作我们的 DOM，而浏览器希望将 HTML 解析的 DOM 和 JS 操作之后的 DOM 放到一起来生成最终的 DOM，而不是频繁的去生成新的 DOM 树</li></ul> <h2 id="内核和引擎的关系"><a href="#内核和引擎的关系" class="header-anchor">#</a> 内核和引擎的关系</h2> <p>WebKit 为例，WebKit 由两部分组成：</p> <ul><li>WebCode：负责 HTML 解析、布局、渲染等等相关工作。</li> <li>JavaScriptCore：解析、执行 JS 代码</li></ul> <p>小程序的架构图</p> <ul><li>渲染层 Webview</li> <li>逻辑层 JSCore</li></ul> <h2 id="node-js-的应用场景"><a href="#node-js-的应用场景" class="header-anchor">#</a> Node.js 的应用场景</h2> <ul><li>node 包的形式对库进行管理；</li> <li>作为 Web 服务器开发</li> <li>借助 Node.js 完成前后端渲染的同构操作</li> <li>编写脚本工具</li> <li>Electron 开发桌面应用程序</li></ul> <h2 id="node-的安装"><a href="#node-的安装" class="header-anchor">#</a> Node 的安装</h2> <p>Node.js 是在 2009 年诞生的。</p> <ul><li>LTS 版本：相对稳定一些，推荐线上环境使用该版本（开发可以选择 LTS 版本）</li> <li>Current 版本：最新的 Node 版本，包含很多新特性（学习可以选择 Current 版本）</li></ul> <h3 id="安装方式"><a href="#安装方式" class="header-anchor">#</a> 安装方式</h3> <ul><li>Linux 上的 yum、dnf</li> <li>Mac 上的 homebrew</li> <li>直接下载对应的安装包 window（.msi），Mac(.pkg)</li></ul> <h3 id="node-的版本工具"><a href="#node-的版本工具" class="header-anchor">#</a> Node 的版本工具</h3> <ul><li>nvm：(node.js version management)是一个 nodejs 的版本管理工具</li> <li>n（交互式管理你的 Node.js 版本）=&gt;（tjd 大佬写的）</li></ul> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>这两个工具都不支持 windows，可以使用 nvm-windows，安装路径最好不要出现中文和空格。</p></div> <h4 id="nvm"><a href="#nvm" class="header-anchor">#</a> nvm</h4> <p>通过它可以安装和切换不同版本的 nodejs。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 查看本地安装的所有版本;有可选参数available,显示所有可下载的版本，list等同于ls</span>
nvm list <span class="token punctuation">[</span>有可选参数available<span class="token punctuation">]</span>

<span class="token comment"># 安装node,version是指定版本也可以是最新的latest，可选arch是指定安装32位还是64位，默认系统位数</span>
<span class="token comment"># 可以添加--insecure绕过远程服务器的SSL</span>
nvm <span class="token function">install</span> <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span> <span class="token punctuation">[</span>arch<span class="token punctuation">]</span>

<span class="token comment"># 使用指定版本node，可指定32/64位</span>
nvm use <span class="token punctuation">[</span>version<span class="token punctuation">]</span> <span class="token punctuation">[</span>arch<span class="token punctuation">]</span>

<span class="token comment"># 卸载指定版本node</span>
nvm uninstall <span class="token punctuation">[</span>version<span class="token punctuation">]</span>

<span class="token comment"># 设置npm镜像</span>
<span class="token comment"># https://github.com/npm/cli/archive/。如果不写url，则使用默认url。设置后可至安装目录settings.txt文件查看，也可直接在该文件操作。</span>
nvm npm_mirror <span class="token punctuation">[</span>url<span class="token punctuation">]</span>
<span class="token comment"># 设置node镜像</span>
nvm node_mirror https://npm.taobao.org/mirrors/node/
<span class="token comment"># 设置npm镜像</span>
nvm node_mirror https://npm.taobao.org/mirrors/npm/
<span class="token comment"># nvm配置淘宝镜像，在setting.txt文件中最后一行添加以下两行</span>
node_mirror: https://npm.taobao.org/mirrors/node/
npm_mirror: https://npm.taobao.org/mirrors/npm/

<span class="token comment"># 显示node是运行在32位还是64位</span>
nvm arch

<span class="token comment"># 开启node.js版本管理</span>
nvm on

<span class="token comment"># 关闭node.js管理</span>
nvm off

<span class="token comment"># 设置下载代理，不加可选参数url，显示当前代理，将url设置位none则移除代理</span>
nvm proxy <span class="token punctuation">[</span>url<span class="token punctuation">]</span>

<span class="token comment"># 设置存储不同版本node的目录，如果未设置，默认使用当前目录</span>
nvm root <span class="token punctuation">[</span>path<span class="token punctuation">]</span>

<span class="token comment"># 显示nvm版本</span>
nvm -v
</code></pre></div><h2 id="node-的-repl"><a href="#node-的-repl" class="header-anchor">#</a> Node 的 REPL</h2> <p><strong>什么是 REPL？</strong></p> <ul><li>REPL 是 Read-Eval-Print Loop 的简称，翻译为&quot;读取-求值-输出&quot; 循环；</li> <li>REPL 是一个简单的、交互式的编程环境；</li></ul> <blockquote><p>输入 node 即可进入 Node 的 REPL</p></blockquote> <h2 id="浏览器和-node-js-架构区别"><a href="#浏览器和-node-js-架构区别" class="header-anchor">#</a> 浏览器和 Node.js 架构区别</h2> <p>Chrome</p> <p>HTML/CSS JavaScript
Blink V8
中间层
操作系统（网卡/硬盘/显卡。。。）</p> <p>Node</p> <p>JS
V8
中间层（libuv）【包括了事件循环，通过 Node BINDINGS(NODE API)链接 LIBUV】
操作系统（网卡/硬盘/显卡。。。）</p> <p>单独的 Node.js 架构图</p> <ul><li>我们编写的 JS 代码会经过 V8 引擎，再通过 Node.js 的 Bindings,将任务放到 Libuv 的事件循环中；</li> <li>libuv(Unicorn Velociraptor-独角伶盗龙)是使用 C 语言编写的库.</li> <li>libuv 提供了事件循环、文件系统读写、网络 IO、线程池等等内容</li></ul> <p>Node.js 使用 JS、C++和 C 语言来编写的</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/Node/base/module.html">
        模块化
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/Node/assets/js/app.7610ec33.js" defer></script><script src="/Node/assets/js/2.b6a62b60.js" defer></script><script src="/Node/assets/js/12.913a2399.js" defer></script>
  </body>
</html>
